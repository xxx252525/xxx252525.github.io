"use strict";(self.webpackChunkxxx252525_github_io=self.webpackChunkxxx252525_github_io||[]).push([[5691],{81021:(s,i)=>{i.A=(s,i)=>{const a=s.__vccOpts||s;for(const[s,n]of i)a[s]=n;return a}},1915:(s,i,a)=>{a.r(i),a.d(i,{comp:()=>L,data:()=>N});var n=a(6254);const t=a.p+"assets/img/image-20251210095415674.5349327e.png",l=a.p+"assets/img/image-20251210095151787.8f9e5c4e.png",e=a.p+"assets/img/image-20251210095658462.fe3c247b.png",h=a.p+"assets/img/image-20251210115150578.91dc40e2.png",d=a.p+"assets/img/image-20251210115543717.9f27052a.png",p=a.p+"assets/img/image-20251210121533650.be969461.png",k=a.p+"assets/img/image-20251210121754423.4c0ae8cf.png",r=a.p+"assets/img/image-20251215160139681.d1c6d2c3.png",g=a.p+"assets/img/image-20251215160529977.46898d54.png",c=a.p+"assets/img/image-20251215161611078.f20a6d2a.png",F=a.p+"assets/img/image-20251215162221121.e2004ffc.png",A=a.p+"assets/img/image-20251215162531260.addbdff7.png",y=a.p+"assets/img/image-20251215162920185.df4ba5d0.png",o=a.p+"assets/img/image-20251215163337311.70c69b2b.png",b=a.p+"assets/img/image-20251215163434538.a22a8f7f.png",m=a.p+"assets/img/image-20251215163604669.39f21451.png",v=a.p+"assets/img/image-20251215165038223.71e8a9c5.png",u=a.p+"assets/img/PixPin_2025-12-15_16-53-39.b36c5e55.gif",B=a.p+"assets/img/PixPin_2025-12-15_17-01-20-1765806434046-1.d4aff1e2.gif",E=a.p+"assets/img/image-20251215171911017.ae261d09.png",f=a.p+"assets/img/image-20251215194458250.053e1301.png",C=a.p+"assets/img/image-20251215194625998.7877f640.png",x=a.p+"assets/img/image-20251215195049158.2ac84e54.png",D=a.p+"assets/img/image-20251215200647818.a2d5e1e1.png",P=a.p+"assets/img/image-20251216095809945.835c8bc3.png",I=a.p+"assets/img/image-20251216100154615.ca0cbfdf.png",S=a.p+"assets/img/image-20251216101543153.3966fe63.png",z=a.p+"assets/img/image-20251216104547427.958995bf.png",_=a.p+"assets/img/image-20251216110425818.b9d91c78.png",T=a.p+"assets/img/image-20251216110639526.0694d437.png",w=a.p+"assets/img/image-20251216110742712.fa3c4d3e.png",U=a.p+"assets/img/微信收款.d124c563.png",q=a.p+"assets/img/支付宝收款.05db53da.jpg",R={},L=(0,a(81021).A)(R,[["render",function(s,i){return(0,n.uX)(),(0,n.CE)("div",null,i[0]||(i[0]=[(0,n.Fv)('<h1 id="_08-任务与进程" tabindex="-1"><a class="header-anchor" href="#_08-任务与进程"><span>08-任务与进程</span></a></h1><p>Linux是一种多用户操作系统，也是一种多任务系统，进程是正在运行的实例程序，常见的有Windows下的任务管理器，在Linux中常使用top、ps、pstree等工具来查看进程的状态。</p><p>每一个进程都有自己的ID，例如Pid和Uid、Fid。</p><blockquote><p>注意：用来显示进程相关信息的命令主要从/porc文件系统中存储的原始数据获取信息。每一个进程都在/porc的子目录存储了自己的信息，并且是以进程ID的方式。</p></blockquote><h2 id="查看进程" tabindex="-1"><a class="header-anchor" href="#查看进程"><span>查看进程</span></a></h2><p><code>ps</code>命令是&quot;process status&quot;的缩写，ps 命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -a：显示所有进程，包括其他用户的进程。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -d：显示磁盘使用情况。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -e：显示所有进程，与-a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 选项相同。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -f：显示更多的字段信息。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -l：显示更多的字段信息，与-f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 选项类似，但-l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 选项会显示进程的完整路径。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -p：显示进程的</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PPID（父进程</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID）。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -r：显示当前系统的运行级别。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -u：显示用户信息。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -v：显示版本信息。</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -x：显示被中断的进程。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用<code>ps -A</code>查看所有的进程</p><figure><img src="'+t+'" alt="image-20251210095415674" tabindex="0" loading="lazy"><figcaption>image-20251210095415674</figcaption></figure><p>使用<code>ps -aux</code>选项可以显示用户和被中断的进程</p><figure><img src="'+l+'" alt="image-20251210095151787" tabindex="0" loading="lazy"><figcaption>image-20251210095151787</figcaption></figure><p>使用<code>ps -le</code>查看所有进程的同时查看PID和进程的优先级。</p><figure><img src="'+e+'" alt="image-20251210095658462" tabindex="0" loading="lazy"><figcaption>image-20251210095658462</figcaption></figure><p>之查看Shell产生的进程可以使用<code>ps -l</code></p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">miui@Fedora:~$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   UID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PRI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  NI</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ADDR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> SZ</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WCHAN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  TTY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          TIME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CMD</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> S</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    1378</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    1377</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2108</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do_wai</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bash</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> R</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    1564</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    1378</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 99</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  80</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2562</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      pts/0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    00:00:00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ps命令输出信息的含义</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>USER</td><td>该进程是由哪一个用户产生的</td></tr><tr><td>PID</td><td>进程的PID</td></tr><tr><td>%CPU</td><td>进程占用CPU资源的百分比</td></tr><tr><td>%MEM</td><td>进程占用内存资源的百分比</td></tr><tr><td>VSZ</td><td>该进程占用虚拟内存的大小</td></tr><tr><td>RSS</td><td>进程占用的实际物理内存大小</td></tr><tr><td>TTY</td><td>进程是在哪一个终端运行的<br>其中，tty1～tty6 代表本地控制台终端（可以通过 Alt+F1～F6 快捷键切换不同的终端），tty2～tty6 是本地的字符界面终端，<br>tty1 是图形终端。pts/0～ 255 代表虚拟终端，一般是远程连接的终端，第一个远程连接占用 pts/0，<br>第二个远程连接占用 pts/1，依次增长。</td></tr><tr><td>STAT</td><td>进程的状态</td></tr><tr><td>START</td><td>-D：不可被唤醒的睡眠状态，通常用于 I/O 情况。<br>-R：该进程正在运行。<br>-S：该进程处于睡眠状态，可被唤醒。<br>-T：停止状态，可能是在后台暂停或进程处于出错状态。<br>-W：内存交互状态（从 2.6内核开始无效）。<br>-X：死掉的进程（应该不会出现）。<br>-Z：僵尸进程。进程已经中止，但是部分程序还在内存当中。<br>-&lt;：高优先级（以下状态在 BSD 格式中出现）。<br>-N：低优先级。<br>-L：被锁入内存。<br>-S：包含子进程。<br>-l:多线程（小写 L）。<br>-+：位于后台。该进程的启动时间</td></tr><tr><td>TIME</td><td>该进程占用CPU的运算时间，这不是系统时间</td></tr><tr><td>COMMAND</td><td>产生此进程的命令</td></tr></tbody></table><p>在使用<code>ps -l</code>命令的时候，返回的参数解析如下：</p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>F</td><td>Flags，是产生进程的标志<br>0：代表无标志<br>1：是Fork但是没有exec<br>4：使用进程root权限<br>40：多线程进程</td></tr><tr><td>S</td><td>进程的状态<br>R：Running准备就绪<br>S：Slepping可终端睡眠<br>D：不可中断睡眠<br>T：停止<br>Z：僵尸进程<br></td></tr><tr><td>C</td><td>CPU的使用率</td></tr><tr><td>PRI</td><td>动态优先级，数字越小，优先级越高<br>实时进程0-99<br>普通进程100-139</td></tr><tr><td>NI</td><td>静态优先级，用户可以调整的，默认是0，范围是-20(最高优先级)~-19(最低优先级)</td></tr><tr><td>ADDR</td><td>内存地址</td></tr><tr><td>SZ</td><td>虚拟内存大小</td></tr><tr><td>WCHAH</td><td>进程睡眠的原因<br>hirimer_nanosleep：睡眠计时器<br>do_select：I/O多路复用<br>wait_for_completoin：等待某个内核事件完成<br>futex_wait_queue_me：等待futex<br>finissh_task_switch：切换上下文</td></tr></tbody></table><h2 id="进程树" tabindex="-1"><a class="header-anchor" href="#进程树"><span>进程树</span></a></h2><p><code>pstree</code> 命令的英文全称是&quot;process tree&quot;，即将所有进程以树状图显示，树状图将会以 pid(如果有指定)或是以 systemd 这个基本进程为根(root)，如果有指定使用者 id，则树状图会只显示该使用者 所拥有的进程。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pstree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pstree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [-acglpsStTuZ] [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-h</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | -H 进程号 ] [ </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-N</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 类型 ]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-G</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-U</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ］</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 【进程号I</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 用户</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ］或：pstree</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -a,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --arguments</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     显示命令行参数</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -A,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --ascii</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ASCII</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 行绘制字符</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -c,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --compact-not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   不要对完全相同的子树进行压缩</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -C,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --color=类型</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    按照指定属性对进程上色</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                      (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -g,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --show-pgids</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    显示进程组</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID；隐含启用</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 选项</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -G,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --vt100</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VT100</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 行绘制字符</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -h,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --highlight-all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 高亮显示当前进程和其所有祖先</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -H</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --highlight-pid=PID</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                      高亮显示指定</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 对应的进程和其所有祖先</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -l,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --long</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          不要截断长行</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -n,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --numeric-sort</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  按照</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 对输出进行排序</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -N</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 类型,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --ns-sort=类型</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                      按照指定命名空间类型对输出进行排序</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                              (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cgroup,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ipc,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mnt,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> net,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pid,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -p,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --show-pids</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     显示</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID；隐含启用</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 选项</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -s,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --show-parents</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  显示所选进程的父进程</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -S,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --ns-changes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    显示命名空间的变化</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -t,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --thread-names</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  显示完整线程名称</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -T,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --hide-threads</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  隐藏线程，只显示进程</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -u,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --uid-changes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   显示用户</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID（UID）的变化</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -U,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --unicode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       使用</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> UTF-8（Unicode）的行绘制字符</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -V,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       显示版本信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  -Z,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --security-context</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                      显示安全属性</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  进程号</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 从指定进程号开始；默认为</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1（init）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  用户</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   仅显示从指定用户的进程开始的进程树</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实例：</p><p>显示当前所有进程的进程号和进程ID</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">miui@Fedora:~$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pstree</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemd(1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─NetworkManager(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">935</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NetworkManager}(971</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     ├─{NetworkManager}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">973</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                     └─{NetworkManager}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">974</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─VGAuthService(949</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─abrt-dump-journ(989</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─abrt-dump-journ(991</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─abrt-dump-journ(993</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─abrtd(962</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">abrtd}(977</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ├─{abrtd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">978</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            └─{abrtd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">980</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─anacron(1582</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─atd(1062</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─auditd(892</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─sedispatch(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">894</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             ├─{auditd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">893</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             └─{auditd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">895</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─chronyd(955</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─crond(1067</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─dbus-broker-lau(933</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───dbus-broker(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">934</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─dockerd(1054</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─containerd(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1144</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">containerd}(1145</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  ├─{containerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1146</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  ├─{containerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1147</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  ├─{containerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1148</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  ├─{containerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1149</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  ├─{containerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1150</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                  └─{containerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1151</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1122</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1123</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1124</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1125</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1126</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1143</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1153</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               ├─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1154</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               └─{dockerd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1155</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─gssproxy(1037</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">gssproxy}(1039</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                ├─{gssproxy}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1040</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                ├─{gssproxy}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1041</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                ├─{gssproxy}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1042</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                └─{gssproxy}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1043</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─irqbalance(940</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">irqbalance}(970</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─login(1090</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───bash(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1344</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─rsyslogd(943</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rsyslogd}(952</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               └─{rsyslogd}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">975</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─sshd(1030</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─sshd(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1373</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───sshd(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1377</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───bash(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1378</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───pstree(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1681</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            ├─sshd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1424</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">───sshd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1428</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">───bash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1429</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            └─sshd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1454</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">───sshd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1458</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">───sftp-server</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1459</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd(1326</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)───(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sd-pam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1328</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-homed(947</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-journal(788</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-logind(948</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-oomd(889</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-resolve(890</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-udevd(824</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           ├─systemd-userdbd(891</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─systemd-userwor(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1678</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                      ├─systemd-userwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1679</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           │</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                      └─systemd-userwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1680</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           └─vmtoolsd(950</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)─┬─{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vmtoolsd}(960</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                           ├─</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{vmtoolsd}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(985</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                           └─</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{vmtoolsd}</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">(986</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="动态进程" tabindex="-1"><a class="header-anchor" href="#动态进程"><span>动态进程</span></a></h2><p><code>top</code>命令是动态查看进程变化，监控 Linux 的系统状况；它是常用的性能分析工具，能够实时显示系统资源各个进程占用状况，类是 windows 的任务管理器。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">top</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -b：以批处理模式操作</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -c：显示完整的治命令</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -d：屏幕刷新间隔时间</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -I：忽略失效过程</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -s：保密模式</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -S：累积模式</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;时间&gt;：设置间隔时间;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -u</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;用户名&gt;：指定用户名;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;进程号&gt;：指定进程;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;次数&gt;：循环显示的次数</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>大多数情况下都是使用交互命令，很少使用选项，除非特殊情况。</p><h3 id="交互命令" tabindex="-1"><a class="header-anchor" href="#交互命令"><span>交互命令</span></a></h3><p>在top命令执行过程中可以使用的一些交互命令。这些命令都是单字母的，如果在命令行中使用了-s选项，其中一些命令可能会被屏蔽。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">h：显示帮助画面，给出一些简短的命令总结说明</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">k：终止一个进程</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">i：忽略闲置和僵死进程，这是一个开关式命令</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">q：退出程序</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">r:重新安排一个进程的优先级别</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">S：切换到累计模式</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">s：改变两次刷新之间的延迟时间（单位为s），如果有小数，就换算成ms。输入值则系统将不断刷新，默认值是5s</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">f或者F：从当前显示中添加或者删除项目</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">o或者0：改变显示项目的顺序</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">l：切换显示平均负载和启动时间信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">m：切换显示内存信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">t：切换显示进程和CPU状态信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">c：切换显示命令名称和完整命令行</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">M：根据驻留内存大小进行排序</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">P：根据CPU使用百分比大小进行排序</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">T：根据时间/累计时间进行排序</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">W：将当前设置写入~/.toprc文件中</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>实例：</p><p>动态的查看当前进程状况，使用top命令即可进入交互界面</p><figure><img src="'+h+'" alt="image-20251210115150578" tabindex="0" loading="lazy"><figcaption>image-20251210115150578</figcaption></figure><p>在如图界面我们可以通过一些字符进行交互，例如杀死进程的操作如下：</p><figure><img src="'+d+'" alt="image-20251210115543717" tabindex="0" loading="lazy"><figcaption>image-20251210115543717</figcaption></figure><p>使用<code>q</code>键即可退出当前操作，或者退出当前动态进程。</p><p>top进程字段说明：</p><table><thead><tr><th>字段</th><th>解析</th></tr></thead><tbody><tr><td>PID</td><td>进程的ID，唯一的标识符</td></tr><tr><td>USER</td><td>进程的实际用户</td></tr><tr><td>PR</td><td>进程调度的优先级，这个字段的值是“rt”。则表示这些进程运行在实时态</td></tr><tr><td>NI</td><td>进程的优先级，nice值，越小优先级越高</td></tr><tr><td>VIRT</td><td>进程使用的虚拟内存</td></tr><tr><td>RES</td><td>驻留内存的大小，驻留内存是任务使用的非交换物理内存大小</td></tr><tr><td>SHR</td><td>进程使用的共享内存</td></tr><tr><td>S</td><td>这个是进程的状态。它有以下不同的值:D 不可中断的睡眠态。<br>R 运行态<br>S 睡眠态<br>T 被跟踪或已停止<br>Z 僵尸进程</td></tr><tr><td>TIME+</td><td>任务启动后到现在所用的全部时间，精确到秒</td></tr></tbody></table><p>也可以使用第三方的进程管理工具，例如Htop、Btop、Atop等等。</p><p>这里给大家看看Htop与Btop的进程模样，Htop进程面板如下：</p><figure><img src="'+p+'" alt="image-20251210121533650" tabindex="0" loading="lazy"><figcaption>image-20251210121533650</figcaption></figure><p>Btop进程面板如下：</p><figure><img src="'+k+'" alt="image-20251210121754423" tabindex="0" loading="lazy"><figcaption>image-20251210121754423</figcaption></figure><blockquote><p>安装Htop和Btop的命令如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dnf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> htop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> btop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></blockquote><h2 id="终止进程" tabindex="-1"><a class="header-anchor" href="#终止进程"><span>终止进程</span></a></h2><p><code>kill</code>和本意一样，杀死，也就是杀死进程，终止进程。kill命令默认使用信号为 15，用于结束进程或工作。如果进程或工作忽略此信号，则可以使用信号 9，强制杀死进程。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项] [进程号]</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">kill</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">［-s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 信号声明</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 丨-n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 信号编号丨-信号声明］</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 进程号I</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 任务声明</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ··．或</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kill-l［信号声明］</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -a：当处理当前进程时，不限制命令名和进程号的对应关系</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -l：</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;信息编号&gt;：若不加&lt;信息编号&gt;选项，则-l参数会列出全部的信息名称</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -p：指定kill</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 命令只打印相关进程的进程号，而不发送任何信号</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -s：</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;信息名称或编号&gt;：指定要送出的信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -u：指定用户</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>killall</code>命令使用进程的名称来杀死进程，使用此指令可以杀死一组同名进程。杀死一组同名的进程我们也可以使用 kill 命令来一个个实现，只不过需要在使用 ps 命令查询进程号时配合 grep 命令查找出对应进程名的所有 PID。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">killall</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -e：对长名称进行精确匹配</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -l：忽略大小写的不同</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -p：杀死进程所属的进程组</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -i：交互式杀死进程，杀死进程前需要进行确认；</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -l：打印所有已知信号列表</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -q：如果没有进程被杀死。则不输出任何信息</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -r：使用正规表达式匹配要杀死的进程名称</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -S：用指定的进程号代替默认信号“SIGTERM</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;;</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -u：杀死指定用户的进程</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="进程优先级" tabindex="-1"><a class="header-anchor" href="#进程优先级"><span>进程优先级</span></a></h2><h3 id="nice" tabindex="-1"><a class="header-anchor" href="#nice"><span>nice</span></a></h3><p><code>nice</code>命令是用来调整进程的执行优先级的，nice 命令表示新执行的命令即给予新的优先级值。进程优先级的值越小优先级越高。nice常用来合理分配系统资源。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>语法：</span></span>\n<span class="line"><span>nice [选项] [命令 [参数]...]</span></span>\n<span class="line"><span>从 -20（最高优先级）到 19（最低优先级）。</span></span>\n<span class="line"><span>  -n, --adjustment=N   在优先级数值上加上整数 N（默认为 10）</span></span>\n<span class="line"><span>      --help        显示此帮助信息并退出</span></span>\n<span class="line"><span>      --version     显示版本信息并退出</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container caution"><p class="hint-container-title">警告</p><p>以指定的优先级 (niceness) 运行 &lt;命令&gt;，这会影响相应进程的调度。<br> 如果不指定 &lt;命令&gt;，程序会显示当前的优先级。优先级的范围是</p><p>退出状态：<br> 125 如果 nice 命令本身执行失败<br> 126 如果找到了 &lt;命令&gt;，但无法执行<br> 127 如果未找到 &lt;命令&gt;</p><p>其他情况下，退出状态是 &lt;命令&gt; 的退出状态</p></div><p>在程序中，程序运行一般存在前台和后台两种程序，大多数我们看不见的程序都是处于后台运行的，可以实现交互运行的程序都是前台，前台会占用我们的交互。</p><p>这里我们使用后台来进行运行，前后台的概念会在后面进行详细的讲解。设置程序的优先级操作如下：</p><figure><img src="'+r+'" alt="image-20251215160139681" tabindex="0" loading="lazy"><figcaption>image-20251215160139681</figcaption></figure><p>使用<code>-n</code>来设置优先级，我们在使用vim之后，在后面添加了一个&amp;符号，这使得我们创建了一个后台进程，如果是前台进程，就会进入到Vim编辑器中。如果需要将正在运行的前台命令放到后台，并且暂停，可以使用<code>Ctrl+Z</code>完成。可以看见我们创建了六次进程：</p><figure><img src="'+g+'" alt="image-20251215160529977" tabindex="0" loading="lazy"><figcaption>image-20251215160529977</figcaption></figure><p>使用kill来杀死所有的vim后台进程，操作如下：</p><figure><img src="'+c+'" alt="image-20251215161611078" tabindex="0" loading="lazy"><figcaption>image-20251215161611078</figcaption></figure><h3 id="renice" tabindex="-1"><a class="header-anchor" href="#renice"><span>renice</span></a></h3><p><code>renice</code>命令是与 nice 关联的一个命令，由 re 两个字母就知道可以重新调整进程执行的优先级，可以指定群组或者用户名调整优先级等级，并修改隶属于该群组或者用户的所有程序优先级。等级范围为[-20,19]。同样仅系统管理员可以拉高优先级。nice 在进程拉起时调整，renice 在进程执行时调整。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">renice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项] </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -n</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m&gt;               </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">指定“nice值”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                              如果在环境中设置了POSIXLY_CORRECT标志，</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                              则该优先级是“相对”于当前进程的优先级；</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                              否则，该优先级是“绝对”的。</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    --priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m&gt;       </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">指定“绝对”的“nice值”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    --relative</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nu</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m&gt;       </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">指定“相对”的“nice值”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -p,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --pid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              将参数解释为进程ID（默认值）</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -g,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --pgrp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             将参数解释为进程组ID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -u,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             将参数解释为用户名或用户ID</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -h,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --help</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             显示此帮助信息</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -V,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          显示版本信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们再次创建几个vim后台进程，然后来调整进程的优先级：</p><figure><img src="'+F+'" alt="image-20251215162221121" tabindex="0" loading="lazy"><figcaption>image-20251215162221121</figcaption></figure><p>将进程1504的优先级调整为-5，操作如下：</p><figure><img src="'+A+'" alt="image-20251215162531260" tabindex="0" loading="lazy"><figcaption>image-20251215162531260</figcaption></figure><p>前面有一个错误，使用<code>-n</code>的时候-20写成了20，因为区间是-20到19，超了之后我们可以看到，他的进程优先级还是19，并不是20。如图：</p><figure><img src="'+y+'" alt="image-20251215162920185" tabindex="0" loading="lazy"><figcaption>image-20251215162920185</figcaption></figure><h2 id="任务列表" tabindex="-1"><a class="header-anchor" href="#任务列表"><span>任务列表</span></a></h2><p><code>jobs</code>命令主要用于显示系统中的任务列表及其运行状态，该命令可以显示任务号及其对应的进程号。其中，任务号是以普通用户的角度进行的，而进程号则是从系统管理员的角度来看的。一个任务可以对应一个或者多个进程号。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">jobs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项] [任务、命令]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        在正常信息的基础上列出进程</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        仅列出上次通知之后改变了状态的进程</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        仅列出进程</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        限制仅输出运行中的任务</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">      -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        限制仅输出已停止的任务</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以使用jobs来查看任务列表，如图：</p><figure><img src="'+o+'" alt="image-20251215163337311" tabindex="0" loading="lazy"><figcaption>image-20251215163337311</figcaption></figure><p>目前我们的任务主要就是四个后台vim，使用<code>-l</code>选项可以显示更详细的进程ID</p><figure><img src="'+b+'" alt="image-20251215163434538" tabindex="0" loading="lazy"><figcaption>image-20251215163434538</figcaption></figure><p>使用<code>-s</code>查看停止的进程:</p><figure><img src="'+m+'" alt="image-20251215163604669" tabindex="0" loading="lazy"><figcaption>image-20251215163604669</figcaption></figure><p>因为我们在创建vim后台的时候，就已经提示过已停止，程序在后台是停止的，他们只是存在一个运行的任务，并没有启用。这是非常需要注意的，为什么放在这里讲，因为马上就讲解前后台的内容了。</p><h2 id="前台与后台" tabindex="-1"><a class="header-anchor" href="#前台与后台"><span>前台与后台</span></a></h2><h3 id="后台" tabindex="-1"><a class="header-anchor" href="#后台"><span>后台</span></a></h3><p><code>bg</code>命令用于将作业放到后台运行，使前台可以执行其他任务。该命令的运行效果与在指令后面添加符号&amp;的效果是相同的，都是将其放到系统后台执行。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">bg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [任务号]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>bg与&amp;的区别：</strong></p><table><thead><tr><th>特性</th><th>bg</th><th>&amp;</th></tr></thead><tbody><tr><td>使用情况</td><td>再启动命令的时候加上，可以直接让程序在后台运行</td><td>在程序已经启动被暂停后，用它恢复到后台</td></tr><tr><td>运行情况</td><td>启动的时候就脱离了前台控制，属于终端的子进程</td><td>原本是前台进程，暂停后放在后台，依旧是终端的子进程</td></tr><tr><td>输入输出</td><td>默认继承当前终端的stdin、stdout、stderr，有可能会在终端打印输出</td><td>同样继承了终端输出，可能会在终端进行打印</td></tr></tbody></table><div class="hint-container important"><p class="hint-container-title">重要</p><p>在前面我们说的vim，创建的vim进程是停止的，这个原因其实是vim自身的特性，因为没有在前台使用，在后台的时候就会自动进入暂停断开的状态，因为vim是一个交互工具，在后台是无法交互的，驻留后台会占用内存，所以在后台的时候会暂停。</p></div><p>我们使用其他的命令配合&amp;符号，依然可以创建一个后台运行的进程。</p><p>我们可以使用如下命令来查看vim后台的状态码：</p><figure><img src="'+v+'" alt="image-20251215165038223" tabindex="0" loading="lazy"><figcaption>image-20251215165038223</figcaption></figure><p>返回的状态是T，T表示进程信号被暂停。</p><p>我们接下来演示一下bg的使用，从前台到后台的操作。</p><figure><img src="'+u+'" alt="PixPin_2025-12-15_16-53-39" tabindex="0" loading="lazy"><figcaption>PixPin_2025-12-15_16-53-39</figcaption></figure><p>现在任务处于后台，我们怎么吧后台的进程重新加入前台呢？</p><h3 id="前台" tabindex="-1"><a class="header-anchor" href="#前台"><span>前台</span></a></h3><p><code>fg</code>命令用于将后台作业（在后台运行的或者在后台挂起的作业）放到前台终端运行。与 bg 命令一样，若后台任务中只有一个，则使用该命令时，可以省略任务号。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">fg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [任务号]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>我们刚才把<code>ping bing.com</code>放到了后台，现在可以将其放到前台来操作，操作如下：</p><figure><img src="'+B+'" alt="PixPin_2025-12-15_17-01-20" tabindex="0" loading="lazy"><figcaption>PixPin_2025-12-15_17-01-20</figcaption></figure><p>使用fg的时候我们通过jobs可以看到任务前面有个编号2和3，我们使用<code>%</code>加上这个数字就能指定回到哪一个前台进程，使用<code>&amp;</code>创建的后台进程都是可以返回的。</p><h3 id="后台任务脱离终端" tabindex="-1"><a class="header-anchor" href="#后台任务脱离终端"><span>后台任务脱离终端</span></a></h3><p><code>nohup</code>命令可以让后台的任务脱离终端。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 命令</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [参数] [&amp;]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>命令：要执行的程序 / 脚本（如 python <a href="http://app.py" target="_blank" rel="noopener noreferrer">app.py</a>、./start.sh）；</li><li>&amp;：可选，将进程放入后台运行（不加 &amp; 则进程仍在前台，终端被占用，仅退出终端时不终止）；</li><li>组合使用 nohup ... &amp; 是最常用的方式（后台运行 + 不挂断）。</li></ul><p>例如启动一个后台进程：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -jar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> app.jar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">app.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查找指定进程（如 java 进程）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> java</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看当前终端的后台任务（带编号）</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">jobs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果不需要保存输出，可将输出重定向到 <code>/dev/null</code>（空设备，相当于 “黑洞”）：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./script.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>后台运行 Python 服务</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动 Flask 服务，日志追加到 flask.log</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> flask</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --host=0.0.0.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">flask.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>后台运行 Shell 脚本</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 给脚本执行权限（首次运行）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> backup.sh</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 后台执行备份脚本，输出写入 backup.log</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nohup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./backup.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">backup.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 2&gt;&amp;1 &amp;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>远程 SSH 执行后台任务（避免断开终止）</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 远程执行脚本，且退出 SSH 后仍运行</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ssh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user@remote-ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;nohup ./remote_script.sh &gt;&gt; remote.log 2&gt;&amp;1 &amp;&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="服务进程" tabindex="-1"><a class="header-anchor" href="#服务进程"><span>服务进程</span></a></h2><h3 id="systemd" tabindex="-1"><a class="header-anchor" href="#systemd"><span>systemd</span></a></h3><p>要想了解 systemd是做什么的，我们需要首先了解Linux的启动过程。如图 所示：</p><figure><img src="'+E+'" alt="image-20251215171911017" tabindex="0" loading="lazy"><figcaption>image-20251215171911017</figcaption></figure><p>第一阶段是硬件启动阶段，UEFI 或BIOS 初始化，运行 POST 开机自检选择启动设备；第二阶段是 GRUB 引导阶段，它是一个多重操作系统启动管理器，用来引导不同系统，Linux使用的是 GRUB2；第三阶段是内核引导阶段，这一阶段涉及驱动加载、切换到真正的根文件系统以及内核初始化；第四阶段是系统初始化阶段，在这一阶段启动 systemd 进程。</p><p><code>systemd</code>可以管理所有系统资源，不同资源统称为 unit，unit 由其相关配置文件进行标识、识别和配置；文件中主要包含了系统服务、监听的 socket、保存的快照以及其他与init 相关的信息。</p><p>在 Linux 系统中，Unit 是 systemd 管理下的可执行文件，用于启动、停止、重启和检查服务状态。Unit 文件分为以下几个类型:</p><ul><li>服务（Service）：这是最常见的Unit 类型，用于管理一个或多个相关服务。服务可以是应用程序、后台进程或其他运行时组件。每个服务都可以独立启动、停止和重启。</li><li>目标（Target）：目标是一个或多个服务的集合，它们按照特定的依赖关系组织在一起。当一个目标被启动时，其依赖的服务也会被自动启动。</li><li>设备（Device）：设备Unit 用于管理硬件设备，例如磁盘分区、网络接口等。当设备被挂载或卸载时，相应的设备 Unit 会被触发。</li><li>路径（Path）：路径 Unit 用于管理文件和目录。当文件或目录被创建、删除或修改时，相应的路径 Unit 会被触发。</li><li>文件（File）：文件Unit 用于管理单个文件。当文件被创建、删除或修改时，相应的文件5 Unit 会被触发。</li><li>时间（Time）：时间 Unit 用于在特定的时间执行某个操作，例如定时启动或停止服务。</li><li>范围（Scope）：范围Unit 用于定义一组服务的生命周期行为，例如在某个服务启动前执行其他服务。</li></ul><p>Unit 文件可以存储在 /etc/systemd/unit/ 目录下，也可以分布在各个服务特定的目录中。Unit 文件的扩展名通常为.service。通过 systemctl 命令，系统管理员可以查询、启动、停止、重启和管理Unit。</p><table><thead><tr><th>运行级别</th><th>systemd target</th><th>说明</th></tr></thead><tbody><tr><td>0</td><td>未设置(关闭系统)</td><td>关闭系统，此级别不能设置为默认，否则无法正常启动</td></tr><tr><td>1</td><td>单用户(syslog)</td><td>提供基本的系统日志功能，单用户模式，具有 root 权限</td></tr><tr><td>2</td><td>无网络多用户</td><td>多用户模式，但没有网络支持</td></tr><tr><td>3</td><td>有网络多用户</td><td>多用户模式，具有网络支持，常用的运行级别</td></tr><tr><td>4</td><td>保留</td><td>保留的运行级别，一般不使用</td></tr><tr><td>5</td><td>有网络和图形化多用户模式</td><td>具有网络和图形界面的多用户模式，如笔记本电脑电池用尽时可能会切换到此模式</td></tr><tr><td>6</td><td>重启</td><td>系统将重启，此级别不能设置为默认，否则电脑将一直开机重启</td></tr></tbody></table><div class="hint-container caution"><p class="hint-container-title">警告</p><p>注意：运行级别 0-5 是由 init 进程控制的，而 systemd 的目标（target） 是另外一种服务管理方式。在实际使用中，运行级别与 systemd 的目标可以相互映射。例如，运行级别 3 可以对应到一个具有网络支持的多用户模式的 systemd target。 具体的映射关系取决于系统配置和需求。</p></div><h3 id="systemctl" tabindex="-1"><a class="header-anchor" href="#systemctl"><span>systemctl</span></a></h3><p><code>systemd</code>是 Linux 系统的初始化系统和服务管理器，是一套后台运行的系统程序。<br><code>systemctl</code>是管理 systemd 的命令行工具，是用户和 systemd 交互的入口。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项] [命令] ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>详细说一下区别：</p><table><thead><tr><th>特性</th><th><strong>systemd</strong></th><th><strong>systemctl</strong></th></tr></thead><tbody><tr><td><strong>本质</strong></td><td>系统级的初始化和服务管理守护进程</td><td>操作 <code>systemd</code> 的命令行客户端工具</td></tr><tr><td><strong>作用</strong></td><td>1. 启动系统、管理开机流程2. 监控和管理所有系统服务（如 sshd、nginx）3. 处理服务依赖、日志、挂载等系统任务</td><td>1. 查看服务状态2. 启动 / 停止 / 重启服务3. 设置服务开机自启4. 管理系统运行级别（target）</td></tr><tr><td><strong>运行方式</strong></td><td>作为系统 PID 为 1 的进程，开机即启动，后台持续运行</td><td>由用户在终端手动执行，执行完即退出</td></tr><tr><td><strong>使用场景</strong></td><td>底层自动运行，用户无需直接操作</td><td>用户日常管理服务的工具，比如 <code>systemctl status sshd</code></td></tr></tbody></table><p>systemctl命令的选项很多，我们可以使用systemctl --help进行查看。</p><h4 id="查看服务" tabindex="-1"><a class="header-anchor" href="#查看服务"><span>查看服务</span></a></h4><p>如果我们不知道系统有哪些服务怎么办？我们只能通过命令去查询所有的服务，然后再去调用，所以第一阶段就是学习怎么去查询服务。</p><figure><img src="'+f+'" alt="image-20251215194458250" tabindex="0" loading="lazy"><figcaption>image-20251215194458250</figcaption></figure><p>因为有很多服务，我们可以通过上下方向键来进行浏览。</p><p>我们也可以只看正在运行的服务，操作如下：</p><figure><img src="'+C+'" alt="image-20251215194625998" tabindex="0" loading="lazy"><figcaption>image-20251215194625998</figcaption></figure><p>有时候我们不知道安装了那些服务，或者我们之后会学习到一些工具的安装，会自带服务，不知道服务名称怎么办？</p><p>加入我们要查看ssh的远程连接的服务，我们不知道服务的名称怎么办？可以使用如下操作：</p><figure><img src="'+x+'" alt="image-20251215195049158" tabindex="0" loading="lazy"><figcaption>image-20251215195049158</figcaption></figure><p>输出会标注服务的<strong>启用状态</strong>（enabled/disabled/masked）。</p><p>我们以<code>sshd.service</code>服务为例子，给出一些操作演示命令，操作命令如下：</p><table><thead><tr><th>功能</th><th>命令示例</th><th>说明</th></tr></thead><tbody><tr><td>查看单个服务状态</td><td>systemctl status sshd.service</td><td>显示服务是否运行、PID、最近日志、启动状态（可省略 <code>.service</code> 后缀）</td></tr><tr><td>查看所有活跃服务</td><td>systemctl list-units --type=service</td><td>仅显示正在运行 / 激活的服务</td></tr><tr><td>查看所有服务（含停止）</td><td>systemctl list-units --type=service --all</td><td>包含已停止、失败的服务</td></tr><tr><td>查看所有已安装服务</td><td>systemctl list-unit-files --type=service</td><td>显示所有已安装的服务文件，标注 enabled/disabled/masked 状态</td></tr><tr><td>启动服务</td><td>systemctl start sshd</td><td>临时启动服务，重启后失效</td></tr><tr><td>停止服务</td><td>systemctl stop sshd</td><td>临时停止服务，重启后失效</td></tr><tr><td>重启服务</td><td>systemctl restart sshd</td><td>停止并重新启动服务（不管当前状态）</td></tr><tr><td>重载服务配置</td><td>systemctl reload sshd</td><td>不停止服务，仅重新加载配置文件（需服务支持，如 nginx、sshd）</td></tr><tr><td>重启 + 重载配置</td><td>systemctl reload-or-restart sshd</td><td>优先重载，若不支持则重启</td></tr><tr><td>查看服务是否运行</td><td>systemctl is-active sshd</td><td>返回 active/inactive，适合脚本判断</td></tr><tr><td>设置开机自启</td><td>systemctl enable sshd</td><td>永久启用（开机自动启动），需重启生效（或 <code>daemon-reload</code>）</td></tr><tr><td>关闭开机自启</td><td>systemctl disable sshd</td><td>永久禁用（开机不启动）</td></tr><tr><td>查看开机自启状态</td><td>systemctl is-enabled sshd</td><td>返回 enabled/disabled/masked，适合脚本判断</td></tr><tr><td>立即启用 + 开机自启</td><td>systemctl enable --now sshd</td><td>临时启动 + 永久启用，一步到位</td></tr><tr><td>立即禁用 + 关闭自启</td><td>systemctl disable --now sshd</td><td>临时停止 + 永久禁用，一步到位</td></tr><tr><td>屏蔽服务（禁止启动）</td><td>systemctl mask sshd</td><td>彻底禁止启动（包括手动 / 自动），软链接到 <code>/dev/null</code></td></tr><tr><td>解除屏蔽</td><td>systemctl unmask sshd</td><td>恢复被屏蔽的服务</td></tr><tr><td>查看服务依赖</td><td>systemctl list-dependencies sshd</td><td>显示该服务依赖的其他单元（正向依赖）</td></tr><tr><td>查看反向依赖</td><td>systemctl list-dependencies --reverse sshd</td><td>显示依赖该服务的其他单元</td></tr><tr><td>查看服务详细信息</td><td>systemctl show sshd</td><td>输出服务的所有配置参数（如启动超时、用户、依赖等）</td></tr><tr><td>重置服务失败状态</td><td>systemctl reset-failed sshd</td><td>若服务启动失败，重置其失败标记（解决 <code>failed</code> 状态）</td></tr></tbody></table><h4 id="设置target" tabindex="-1"><a class="header-anchor" href="#设置target"><span>设置target</span></a></h4><p>查看默认的target，操作如下：</p><figure><img src="'+D+'" alt="image-20251215200647818" tabindex="0" loading="lazy"><figcaption>image-20251215200647818</figcaption></figure><p>其他操作用表格的形式给出，不做过多的演示，我们知道怎么去设置就行主要是环境生产不是很好模拟。</p><table><thead><tr><th>功能</th><th>命令示例</th><th>说明</th></tr></thead><tbody><tr><td>查看当前默认 target</td><td>systemctl get-default</td><td>返回如 multi-user.target（命令行）、graphical.target（图形界面）</td></tr><tr><td>设置默认 target</td><td>systemctl set-default multi-user.target</td><td>永久设置默认运行级别（重启生效）</td></tr><tr><td>临时切换 target</td><td>systemctl isolate multi-user.target</td><td>立即切换到指定 target（不修改默认值），如从图形界面切到命令行</td></tr><tr><td>查看当前运行的 target</td><td>systemctl list-units --type=target</td><td>显示当前激活的 target</td></tr><tr><td>切换到紧急模式</td><td>systemctl isolate emergency.target</td><td>极端故障修复模式（仅只读挂载根目录）</td></tr><tr><td>切换到单用户模式</td><td>systemctl isolate rescue.target</td><td>基础维护模式（可读写根目录，无网络）</td></tr><tr><td>关机</td><td>systemctl poweroff</td><td>等价于传统 runlevel 0</td></tr><tr><td>重启</td><td>systemctl reboot</td><td>等价于传统 runlevel 6</td></tr><tr><td>挂起（休眠）</td><td>systemctl suspend</td><td>内存数据暂存，低功耗，唤醒快</td></tr><tr><td>休眠（挂起 + 磁盘写入）</td><td>systemctl hibernate</td><td>内存数据写入磁盘，断电不丢失，唤醒慢</td></tr><tr><td>混合休眠</td><td>systemctl hybrid-sleep</td><td>同时挂起 + 休眠，兼顾速度和安全性</td></tr></tbody></table><h4 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h4><p>这里给出一些其他的操作命令，不做演示了，常用的大致就是这样：</p><table><thead><tr><th>功能</th><th>命令示例</th><th>说明</th></tr></thead><tbody><tr><td>重新加载 systemd 配置</td><td>systemctl daemon-reload</td><td>修改服务配置文件（如 <code>/usr/lib/systemd/system/sshd.service</code>）后，需执行该命令让 systemd 识别变更</td></tr><tr><td>查看 systemd 状态</td><td>systemctl status</td><td>查看 systemd 主进程（PID 1）的状态</td></tr><tr><td>列出所有 systemd 单元</td><td>systemctl list-units</td><td>显示所有类型的单元（service、target、mount 等）</td></tr><tr><td>查看系统启动耗时</td><td>systemd-analyze</td><td>显示开机总耗时，及各服务启动耗时</td></tr><tr><td>查看服务启动耗时排行</td><td>systemd-analyze blame</td><td>按耗时从长到短列出服务，定位开机慢的原因</td></tr><tr><td>生成开机启动流程图</td><td>systemd-analyze plot &gt; boot.svg</td><td>生成 SVG 格式的启动流程图表，可下载到本地查看</td></tr><tr><td>查看系统版本</td><td>systemctl --version</td><td></td></tr><tr><td>查看远程主机服务</td><td>systemctl -H <a href="mailto:root@192.168.1.100" target="_blank" rel="noopener noreferrer">root@192.168.1.100</a> status sshd</td><td>远程管理其他主机的服务（需开启 SSH 且有权限）</td></tr><tr><td>定时启动服务</td><td>systemctl start sshd --after=5min</td><td>延迟 5 分钟启动服务（需 systemd 230+ 版本）</td></tr></tbody></table><h3 id="service" tabindex="-1"><a class="header-anchor" href="#service"><span>service</span></a></h3><p><code>service</code> 命令是 <strong>Linux 系统中用于管理系统服务</strong> 的核心工具，主要作用是简化对 <code>/etc/init.d/</code> 目录下的服务脚本的操作（适用于传统 SysV 初始化系统），也兼容部分 Systemd 系统（通过封装实现）。它的核心是 “统一接口”—— 无需记住服务脚本的完整路径，即可快速启动、停止、重启服务。和systemctl功能类似，兼容性更好，毕竟是原生功能，但是随着Linux的更新迭代systemctl很多时候成了首选，部分Linux发行版甚至不再支持service命令操作了。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>语法：</span></span>\n<span class="line"><span>service &lt;服务名&gt; &lt;操作指令&gt; [参数]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>常用的操作指令：</p><table><thead><tr><th>指令</th><th>作用</th></tr></thead><tbody><tr><td>start</td><td>启动服务</td></tr><tr><td>stop</td><td>停止服务</td></tr><tr><td>restart</td><td>重启服务</td></tr><tr><td>reload</td><td>重新加载配置文件</td></tr><tr><td>status</td><td>查看服务运行状态</td></tr><tr><td>enable<code>/</code>disable<code></code>/disable</td><td>(部分系统支持)设置开机自启 / 关闭</td></tr></tbody></table><p>例如查看系统所有可管理的服务：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 列出 /etc/init.d/ 下所有服务（SysV 系统）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --status-all</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 或简化版（仅显示服务名）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ls</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/init.d/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>部分新的发行版已经不在支持，比如<strong>Fedora 是纯 Systemd 系统，默认不安装 SysV 初始化脚本（/etc/init.d）相关组件</strong>，而 <code>service</code> 命令是为传统 SysV 系统设计的，因此在 Fedora 上直接用 <code>service</code> 会报错（找不到 <code>/etc/init.d</code> 目录）。</p><p>管理常见的一些服务，操作如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动网络服务</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 停止防火墙（CentOS 6）</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> iptables</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 重启 Nginx 服务</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看 MySQL 运行状态</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mysqld</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="定时任务" tabindex="-1"><a class="header-anchor" href="#定时任务"><span>定时任务</span></a></h3><p><code>crond</code>是Linux操作系统下用来周期性的执行某种任务或等待处理某些事件的一个守护进程，与Windows 操作系统下的计划任务类似。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">crond</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项] </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         打印这条消息</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                                                   </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         以不支持inotify的方式运行守护进程</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                   </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -m</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">com</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">m&gt;  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">关闭该功能，或指定用于发送邮件的客户端</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                   </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         在前台运行</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                                                                   </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         在前台运行，与-n的作用相同</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                  </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         允许使用任何crontab任务</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                    </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         从环境中继承PATH变量，而不是使用默认值“/usr/bin:/bin”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         启用集群支持功能</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                             </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         将日志信息发送到syslog系统中，而不是通过邮件发送</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">                </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -V</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         打印版本信息后退出程序</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">         </span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -x</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">fla</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">g&gt;  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">打印调试信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>crontab</code>是定时任务的配置文件，与crond命令有本质上 的区别，crond用于执行某些定时任务，而crontab是定时任务的配置文件。我们可以通过配置文件来实现定时任务的增删改。crontab依赖于crond执行。</p><p><strong>总结一句话就是：crond执行，crontab创建任务。</strong></p><p>首先我们要启动crond的服务。操作如下：</p><figure><img src="'+P+'" alt="image-20251216095809945" tabindex="0" loading="lazy"><figcaption>image-20251216095809945</figcaption></figure><p>由于我们创建定时任务的时候使用的是/etc/crontab文件，所以我们只需要在文件中添加新的任务计划即可。</p><p>我们想查看目前有哪些定时任务，操作如下：</p><figure><img src="'+I+'" alt="image-20251216100154615" tabindex="0" loading="lazy"><figcaption>image-20251216100154615</figcaption></figure><p>目前用户没有任何定时任务。我们接下来创建一个定时任务，我们先学会查看配置文件，并且能够读懂里面的内容</p><figure><img src="'+S+'" alt="image-20251216101543153" tabindex="0" loading="lazy"><figcaption>image-20251216101543153</figcaption></figure><p>我们可以看见，每一个*都对应一个选项，第一个是分钟，0-59；第二个是小时，0-23，第三个是天，1-31；第四个是月，1-12；第五个是一周中的星期几，0-7。</p><p>例如每分钟执行一次脚本，操作如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">* * * * * /root/test.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>每天每天凌晨 1 点执行备份脚本：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/local/bin/backup.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>每周日 3 点清理日志</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/log</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -mtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +7</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -delete</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>每 5 分钟检测服务，不在就重启</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*/5 * * * * systemctl is-active nginx || </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>扩展的一些常用命令，如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设定某个用户的 cron 服务</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">crontab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 显示 crontab 文件(显示已设置的定时任务)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">crontab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 编辑 crontab 文件(编辑定时任务)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">crontab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -e</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 删除 crontab 文件(删除定时任务)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">crontab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -r</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 删除crontab 文件提醒用户（删除定时任务)</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">crontab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -i</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其实 crontab 定时任务非常简单，只需执行“crontab-e&quot;命令，然后输入想要定时执行的任务即可。不过，当我们执行&quot;crontab-e&quot;命令时，打开的是一个空文件，而且操作方法和Vim 是一致的。</p><h4 id="脚本-crond" tabindex="-1"><a class="header-anchor" href="#脚本-crond"><span>脚本 + crond</span></a></h4><p>比如说我们写一个定时的clean_cache.sh脚本内容如下：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">PATH</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;start clean cache&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/tmp/cron.log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意写的时候要加上PATH，不然容易失败。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /opt/scripts/clean_cache.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>将执行结果写入日志</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">*/10 * * * * /root/test.sh &gt;&gt; /var/log/test.log 2&gt;&amp;1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>使用指定用户执行（系统级）升级</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># /etc/crontab</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="一次性定时任务" tabindex="-1"><a class="header-anchor" href="#一次性定时任务"><span>一次性定时任务</span></a></h3><p><code>at</code>命令是一次性定时计划任务，at 的守护进程 atd 会以后台模式运行，检查作业队列来运行作业。atd 守护进程会检查系统上的一个特殊目录来获取 at 命令的提交的作业，默认情况下，atd 守护进程每 60 秒检查一次目录，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">语法：</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">at</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [选项] [时间]</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -f：指定包含具体指令的任务文件</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -q：指定新任务的队列名称</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -l：显示待执行任务的列表</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -d：删除指定的待执行任务</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -m：任务执行完成后向用户发送E-mail</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -V：显示任务将被执行的时间</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -c：打印任务的内容到标准输出-V显示版本信息</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    -t：</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;时间参数&gt;以时间参数的形式提交要运行的任务</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>首先我们想查看atd服务是否在运行，操作如下：</p><figure><img src="'+z+'" alt="image-20251216104547427" tabindex="0" loading="lazy"><figcaption>image-20251216104547427</figcaption></figure><p>服务是在运行的，如果没有运行，我们就需要使用<code>systemctl start atd</code>来启动服务。</p><p>at有两个权限控制文件，一个是白名单/etc/at.allow，一个是黑名单/etc/at.deny，如果两个文件里面都是空的，那么就是有root用户可以使用。</p><p>我们使用at命令之后会进入到交互模式，输入命令，使用<code>Ctrl+D</code>进行提交。</p><p>例如我们要五分钟后进行关机，操作如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> now</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> minutes</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 此时会进入交互模式，输入如下内容关机</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">shutdown</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> now</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 提交命令</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Ctrl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> D</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如图：</p><figure><img src="'+_+'" alt="image-20251216110425818" tabindex="0" loading="lazy"><figcaption>image-20251216110425818</figcaption></figure><p>常见的一些时间写法：</p><table><thead><tr><th>写法</th><th>含义</th></tr></thead><tbody><tr><td><code>at now + 5 minutes</code></td><td>5 分钟后</td></tr><tr><td><code>at now + 1 hour</code></td><td>1 小时后</td></tr><tr><td><code>at 23:30</code></td><td>今天或明天 23:30</td></tr><tr><td><code>at 10am</code></td><td>上午 10 点</td></tr><tr><td><code>at 2025-12-20 03:00</code></td><td>指定日期时间</td></tr></tbody></table><p>假如我们俩要在晚上23点执行一个脚本，命令操作如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 23:00</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/bin/bash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /root/backup.sh</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Ctrl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> D</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们还有非交互操作，这个时候需要用到重定向，操作如下：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 02:00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>\n<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">tar czf /backup/etc_$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">F).tar.gz /etc</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意：<code>date</code> 里的 <code>%</code> 必须转义</strong></p><p><code>atq</code>命令用于查看当前用户（或 root）的一次性任务，操作如下：</p><figure><img src="'+T+'" alt="image-20251216110639526" tabindex="0" loading="lazy"><figcaption>image-20251216110639526</figcaption></figure><p><code>atrm</code>用于删除任务，操作如下：</p><figure><img src="'+w+'" alt="image-20251216110742712" tabindex="0" loading="lazy"><figcaption>image-20251216110742712</figcaption></figure><h2 id="打赏" tabindex="-1"><a class="header-anchor" href="#打赏"><span>打赏</span></a></h2><p>如果觉得文章写的还不错，可以给作者一个小小的支持嘛？请我喝杯蜜雪冰城可好？</p><img src="'+U+'" alt="微信收款" style="zoom:50%;"><img src="'+q+'" alt="支付宝收款" style="zoom:50%;"><hr>',224)]))}]]),N=JSON.parse('{"path":"/Linux/08%E4%BB%BB%E5%8A%A1%E4%B8%8E%E8%BF%9B%E7%A8%8B.html","title":"08-任务与进程","lang":"zh-CN","frontmatter":{"icon":"/assets/icon/linux.svg","category":["运维基础"],"contributors":true,"lastUpdated":true,"pageview":true,"isOriginal":true,"date":"2025-12-16T00:00:00.000Z","description":"08-任务与进程 Linux是一种多用户操作系统，也是一种多任务系统，进程是正在运行的实例程序，常见的有Windows下的任务管理器，在Linux中常使用top、ps、pstree等工具来查看进程的状态。 每一个进程都有自己的ID，例如Pid和Uid、Fid。 注意：用来显示进程相关信息的命令主要从/porc文件系统中存储的原始数据获取信息。每一个进程...","head":[["meta",{"property":"og:url","content":"https://xxx252525.github.io/Linux/08%E4%BB%BB%E5%8A%A1%E4%B8%8E%E8%BF%9B%E7%A8%8B.html"}],["meta",{"property":"og:site_name","content":"天韵阁"}],["meta",{"property":"og:title","content":"08-任务与进程"}],["meta",{"property":"og:description","content":"08-任务与进程 Linux是一种多用户操作系统，也是一种多任务系统，进程是正在运行的实例程序，常见的有Windows下的任务管理器，在Linux中常使用top、ps、pstree等工具来查看进程的状态。 每一个进程都有自己的ID，例如Pid和Uid、Fid。 注意：用来显示进程相关信息的命令主要从/porc文件系统中存储的原始数据获取信息。每一个进程..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-16T03:11:25.000Z"}],["meta",{"property":"article:published_time","content":"2025-12-16T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-16T03:11:25.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"08-任务与进程\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-12-16T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-16T03:11:25.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"小青瑶🍥⚧[前天阁创客official]\\",\\"url\\":\\"https://github.com/xxx252525\\",\\"email\\":\\"tiangesec@qq.com\\"}]}"]]},"headers":[{"level":2,"title":"查看进程","slug":"查看进程","link":"#查看进程","children":[]},{"level":2,"title":"进程树","slug":"进程树","link":"#进程树","children":[]},{"level":2,"title":"动态进程","slug":"动态进程","link":"#动态进程","children":[{"level":3,"title":"交互命令","slug":"交互命令","link":"#交互命令","children":[]}]},{"level":2,"title":"终止进程","slug":"终止进程","link":"#终止进程","children":[]},{"level":2,"title":"进程优先级","slug":"进程优先级","link":"#进程优先级","children":[{"level":3,"title":"nice","slug":"nice","link":"#nice","children":[]},{"level":3,"title":"renice","slug":"renice","link":"#renice","children":[]}]},{"level":2,"title":"任务列表","slug":"任务列表","link":"#任务列表","children":[]},{"level":2,"title":"前台与后台","slug":"前台与后台","link":"#前台与后台","children":[{"level":3,"title":"后台","slug":"后台","link":"#后台","children":[]},{"level":3,"title":"前台","slug":"前台","link":"#前台","children":[]},{"level":3,"title":"后台任务脱离终端","slug":"后台任务脱离终端","link":"#后台任务脱离终端","children":[]}]},{"level":2,"title":"服务进程","slug":"服务进程","link":"#服务进程","children":[{"level":3,"title":"systemd","slug":"systemd","link":"#systemd","children":[]},{"level":3,"title":"systemctl","slug":"systemctl","link":"#systemctl","children":[{"level":4,"title":"查看服务","slug":"查看服务","link":"#查看服务","children":[]},{"level":4,"title":"设置target","slug":"设置target","link":"#设置target","children":[]},{"level":4,"title":"其他","slug":"其他","link":"#其他","children":[]}]},{"level":3,"title":"service","slug":"service","link":"#service","children":[]},{"level":3,"title":"定时任务","slug":"定时任务","link":"#定时任务","children":[{"level":4,"title":"脚本 + crond","slug":"脚本-crond","link":"#脚本-crond","children":[]}]},{"level":3,"title":"一次性定时任务","slug":"一次性定时任务","link":"#一次性定时任务","children":[]}]},{"level":2,"title":"打赏","slug":"打赏","link":"#打赏","children":[]}],"git":{"createdTime":1765800772000,"updatedTime":1765854685000,"contributors":[{"name":"xxx252525","username":"xxx252525","email":"1072441436@qq.com","commits":5,"url":"https://github.com/xxx252525"}]},"readingTime":{"minutes":33.52,"words":10057},"filePathRelative":"Linux/08任务与进程.md","localizedDate":"2025年12月16日","autoDesc":true}')}}]);